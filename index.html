<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="TripReady">
    <meta name="description" content="国・都市を選ぶだけで旅行準備が完了。ビザ、SIM、通貨、配車アプリなど必要な情報を一画面に整理。">
    <title>TripReady</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="opening-screen" class="opening-screen">
        <div class="logo-container">
            <h1 class="opening-logo">TripReady</h1>
            <p class="opening-tagline">Your Travel Companion</p>
        </div>
    </div>
    <div id="country-selection" class="country-selection hidden">
        <div class="selection-header">
            <h2 class="selection-title">Select Destination</h2>
            <p class="selection-subtitle">渡航先を選択してください</p>
        </div>
        <div class="country-grid">
            <div class="country-card" data-country="thailand"><div class="country-flag">🇹🇭</div><div class="country-info"><div class="country-name-en">Thailand</div><div class="country-name-ja">タイ</div></div></div>
            <div class="country-card" data-country="korea"><div class="country-flag">🇰🇷</div><div class="country-info"><div class="country-name-en">Korea</div><div class="country-name-ja">韓国</div></div></div>
            <div class="country-card country-card-disabled"><div class="country-flag">🇻🇳</div><div class="country-info"><div class="country-name-en">Vietnam</div><div class="country-name-ja">ベトナム</div></div></div>
            <div class="country-card country-card-disabled"><div class="country-flag">🇸🇬</div><div class="country-info"><div class="country-name-en">Singapore</div><div class="country-name-ja">シンガポール</div></div></div>
            <div class="country-card country-card-disabled"><div class="country-flag">🇹🇼</div><div class="country-info"><div class="country-name-en">Taiwan</div><div class="country-name-ja">台湾</div></div></div>
            <div class="country-card country-card-disabled"><div class="country-flag">🇲🇾</div><div class="country-info"><div class="country-name-en">Malaysia</div><div class="country-name-ja">マレーシア</div></div></div>
            <div class="country-card country-card-disabled"><div class="country-flag">🇵🇭</div><div class="country-info"><div class="country-name-en">Philippines</div><div class="country-name-ja">フィリピン</div></div></div>
            <div class="country-card country-card-disabled"><div class="country-flag">🇮🇩</div><div class="country-info"><div class="country-name-en">Indonesia</div><div class="country-name-ja">インドネシア</div></div></div>
        </div>
    </div>
    <div class="container hidden" id="main-container">
        <main id="main-content">
            <div class="category-buttons" id="category-buttons">
                <button class="category-btn" data-category="basic"><svg class="category-icon-svg" viewBox="0 0 120 120"><path d="M20,30 L56,30 L56,80 L20,80 Z" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round"/><path d="M60,30 L100,30 L100,80 L60,80 Z" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round"/><line x1="58" y1="31" x2="60" y2="79" stroke="white" stroke-width="1.5"/><ellipse cx="38" cy="50" rx="8" ry="9" fill="none" stroke="white" stroke-width="1.8"/><path d="M32,58 Q38,56 44,58" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round"/><path d="M34,44 Q38,42 42,44" fill="none" stroke="white" stroke-width="1.3"/><line x1="33" y1="64" x2="43" y2="64" stroke="white" stroke-width="1.2" opacity="0.8"/><line x1="33" y1="68" x2="42" y2="68" stroke="white" stroke-width="1.2" opacity="0.8"/><line x1="33" y1="72" x2="40" y2="72" stroke="white" stroke-width="1.2" opacity="0.8"/><line x1="66" y1="40" x2="92" y2="40" stroke="white" stroke-width="1.3" opacity="0.7"/><line x1="66" y1="46" x2="90" y2="46" stroke="white" stroke-width="1" opacity="0.6"/><line x1="66" y1="50" x2="88" y2="50" stroke="white" stroke-width="1" opacity="0.6"/><line x1="66" y1="54" x2="91" y2="54" stroke="white" stroke-width="1" opacity="0.6"/><line x1="66" y1="60" x2="85" y2="60" stroke="white" stroke-width="1.2" opacity="0.7"/><line x1="66" y1="65" x2="88" y2="65" stroke="white" stroke-width="1" opacity="0.6"/><line x1="66" y1="69" x2="82" y2="69" stroke="white" stroke-width="1" opacity="0.6"/><circle cx="82" cy="72" r="6" fill="none" stroke="white" stroke-width="1.2" opacity="0.5" stroke-dasharray="2,1"/></svg><div><span class="category-title">基本情報</span><span class="category-desc">ビザ・通信・お金</span></div></button>
                <button class="category-btn" data-category="life"><svg class="category-icon-svg" viewBox="0 0 120 120"><circle cx="34" cy="80" r="11" fill="none" stroke="white" stroke-width="2.8"/><circle cx="34" cy="80" r="6.5" fill="none" stroke="white" stroke-width="1.3" opacity="0.6"/><circle cx="82" cy="80" r="11" fill="none" stroke="white" stroke-width="2.8"/><circle cx="82" cy="80" r="6.5" fill="none" stroke="white" stroke-width="1.3" opacity="0.6"/><path d="M34,80 L40,68 L50,62 L68,56" fill="none" stroke="white" stroke-width="2.5"/><path d="M50,62 L68,76 L82,80" fill="none" stroke="white" stroke-width="2.5"/><rect x="44" y="66" width="11" height="7" rx="1" fill="none" stroke="white" stroke-width="1.8"/><path d="M40,74 L36,76 L34,78" fill="none" stroke="white" stroke-width="2"/><path d="M68,56 L74,54 M68,56 L72,52" fill="none" stroke="white" stroke-width="2.2"/><circle cx="78" cy="58" r="2.8" fill="none" stroke="white" stroke-width="1.5"/><ellipse cx="62" cy="42" rx="6.5" ry="7.5" fill="none" stroke="white" stroke-width="2.2"/><path d="M57,44 L67,44" fill="none" stroke="white" stroke-width="1.8"/><path d="M62,49 L62,58 M57,54 L67,54" fill="none" stroke="white" stroke-width="2.2"/><path d="M62,58 L58,68 M62,58 L66,68" fill="none" stroke="white" stroke-width="2.2"/><rect x="42" y="30" width="20" height="15" rx="2" fill="none" stroke="white" stroke-width="2.2"/><line x1="42" y1="37" x2="62" y2="37" stroke="white" stroke-width="1.6"/><path d="M46,27 Q47,24 48,27 M52,27 Q53,24 54,27 M58,27 Q59,24 60,27" fill="none" stroke="white" stroke-width="1.4" opacity="0.7"/><line x1="24" y1="75" x2="19" y2="75" stroke="white" stroke-width="1.6" opacity="0.5"/></svg><div><span class="category-title">現地生活</span><span class="category-desc">配車・デリバリー・翻訳</span></div></button>
                <button class="category-btn" data-category="safety"><svg class="category-icon-svg" viewBox="0 0 120 120"><rect x="25" y="42" width="70" height="44" rx="3" fill="none" stroke="white" stroke-width="2.5"/><path d="M95,42 L100,45 L100,88 L95,86" fill="none" stroke="white" stroke-width="2.2" opacity="0.6"/><rect x="42" y="28" width="32" height="14" rx="2" fill="none" stroke="white" stroke-width="2.2"/><line x1="60" y1="54" x2="60" y2="76" stroke="white" stroke-width="5" stroke-linecap="round"/><line x1="58" y1="54" x2="58" y2="76" stroke="white" stroke-width="1.5" opacity="0.4"/><line x1="46" y1="65" x2="74" y2="65" stroke="white" stroke-width="5" stroke-linecap="round"/><line x1="46" y1="63" x2="74" y2="63" stroke="white" stroke-width="1.5" opacity="0.4"/><line x1="61" y1="55" x2="61" y2="75" stroke="white" stroke-width="1.8" opacity="0.6"/><line x1="47" y1="66" x2="73" y2="66" stroke="white" stroke-width="1.8" opacity="0.6"/></svg><div><span class="category-title">安全・緊急</span><span class="category-desc">治安・医療・緊急連絡先</span></div></button>
                <button class="category-btn" data-category="tourism"><svg class="category-icon-svg" viewBox="0 0 120 120"><path d="M15,28 L58,23 L63,73 L20,78 Z" fill="none" stroke="white" stroke-width="2.5"/><line x1="28" y1="24" x2="30" y2="77" stroke="white" stroke-width="1.6" opacity="0.5"/><line x1="44" y1="23" x2="47" y2="75" stroke="white" stroke-width="1.6" opacity="0.5"/><path d="M20,35 Q28,38 32,35 Q38,31 42,37" fill="none" stroke="white" stroke-width="1.5" opacity="0.7"/><path d="M22,45 Q30,43 35,47" fill="none" stroke="white" stroke-width="1.4" opacity="0.6"/><path d="M32,45 L32,51 M31,45 Q31,42 32,41 Q33,42 33,45 Q33,46.5 32,46.5" fill="none" stroke="white" stroke-width="1.5" opacity="0.8"/><g transform="translate(40,30) rotate(15)"><rect x="0" y="0" width="50" height="32" rx="2" fill="none" stroke="white" stroke-width="2.8"/><rect x="13" y="-9" width="19" height="9" rx="1.5" fill="none" stroke="white" stroke-width="2.2"/><circle cx="25" cy="16" r="11.5" fill="none" stroke="white" stroke-width="2.8"/><circle cx="25" cy="16" r="8" fill="none" stroke="white" stroke-width="2"/><circle cx="25" cy="16" r="4.5" fill="none" stroke="white" stroke-width="1.5" opacity="0.7"/><path d="M21,12 Q23,10 25,12" fill="none" stroke="white" stroke-width="1.8" opacity="0.6"/><circle cx="41" cy="-4" r="2.2" fill="none" stroke="white" stroke-width="1.6"/><rect x="6" y="4" width="6.5" height="4.5" rx="0.5" fill="none" stroke="white" stroke-width="1.4"/></g></svg><div><span class="category-title">観光・文化</span><span class="category-desc">名所・マナー・祝日</span></div></button>
            </div>
            <div class="category-content hidden" id="category-basic"><div class="category-header"><button class="back-to-categories">← カテゴリー選択に戻る</button><h2>📋 基本情報</h2></div><div class="cards-grid"><div class="card accordion-card" data-card="visa"><div class="card-header"><div class="card-header-left"><div class="card-icon">🛂</div><div><h3>入国・ビザ</h3><p class="card-summary" id="summary-visa"><span class="skeleton-text short skeleton" style="display: inline-block; width: 150px; height: 14px;"></span></p></div></div><div class="accordion-icon">▶︎</div></div><div class="card-detail" id="detail-visa"><div class="basic-info" id="basic-visa"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div><div class="detailed-info hidden" id="detailed-visa"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div></div></div><div class="card accordion-card" data-card="sim"><div class="card-header"><div class="card-header-left"><div class="card-icon">📱</div><div><h3>SIM・通信</h3><p class="card-summary" id="summary-sim"><span class="skeleton-text short skeleton" style="display: inline-block; width: 150px; height: 14px;"></span></p></div></div><div class="accordion-icon">▶︎</div></div><div class="card-detail" id="detail-sim"><div class="basic-info" id="basic-sim"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div><div class="detailed-info hidden" id="detailed-sim"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div></div></div><div class="card accordion-card" data-card="currency"><div class="card-header"><div class="card-header-left"><div class="card-icon">💰</div><div><h3>通貨</h3><p class="card-summary" id="summary-currency"><span class="skeleton-text short skeleton" style="display: inline-block; width: 150px; height: 14px;"></span></p></div></div><div class="accordion-icon">▶︎</div></div><div class="card-detail" id="detail-currency"><div class="basic-info" id="basic-currency"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div><div class="detailed-info hidden" id="detailed-currency"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div></div></div><div class="card accordion-card" data-card="payment"><div class="card-header"><div class="card-header-left"><div class="card-icon">💳</div><div><h3>決済方法</h3><p class="card-summary" id="summary-payment"><span class="skeleton-text short skeleton" style="display: inline-block; width: 150px; height: 14px;"></span></p></div></div><div class="accordion-icon">▶︎</div></div><div class="card-detail" id="detail-payment"><div class="basic-info" id="basic-payment"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div><div class="detailed-info hidden" id="detailed-payment"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div></div></div></div></div>
            <div class="category-content hidden" id="category-life"><div class="category-header"><button class="back-to-categories">← カテゴリー選択に戻る</button><h2>🏙️ 現地生活</h2></div><div class="cards-grid"><div class="card accordion-card" data-card="transport"><div class="card-header"><div class="card-header-left"><div class="card-icon">🚗</div><div><h3>配車・移動</h3><p class="card-summary" id="summary-transport"><span class="skeleton-text short skeleton" style="display: inline-block; width: 150px; height: 14px;"></span></p></div></div><div class="accordion-icon">▶︎</div></div><div class="card-detail" id="detail-transport"><div class="basic-info" id="basic-transport"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div><div class="detailed-info hidden" id="detailed-transport"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div></div></div><div class="card accordion-card" data-card="delivery"><div class="card-header"><div class="card-header-left"><div class="card-icon">🍔</div><div><h3>デリバリー</h3><p class="card-summary" id="summary-delivery"><span class="skeleton-text short skeleton" style="display: inline-block; width: 150px; height: 14px;"></span></p></div></div><div class="accordion-icon">▶︎</div></div><div class="card-detail" id="detail-delivery"><div class="basic-info" id="basic-delivery"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div><div class="detailed-info hidden" id="detailed-delivery"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div></div></div><div class="card accordion-card" data-card="translation"><div class="card-header"><div class="card-header-left"><div class="card-icon">🗣️</div><div><h3>翻訳・言語</h3><p class="card-summary" id="summary-translation"><span class="skeleton-text short skeleton" style="display: inline-block; width: 150px; height: 14px;"></span></p></div></div><div class="accordion-icon">▶︎</div></div><div class="card-detail" id="detail-translation"><div class="basic-info" id="basic-translation"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div><div class="detailed-info hidden" id="detailed-translation"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div></div></div><div class="card accordion-card" data-card="culture"><div class="card-header"><div class="card-header-left"><div class="card-icon">🙏</div><div><h3>文化・マナー</h3><p class="card-summary" id="summary-culture"><span class="skeleton-text short skeleton" style="display: inline-block; width: 150px; height: 14px;"></span></p></div></div><div class="accordion-icon">▶︎</div></div><div class="card-detail" id="detail-culture"><div class="basic-info" id="basic-culture"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div><div class="detailed-info hidden" id="detailed-culture"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div></div></div></div></div>
            <div class="category-content hidden" id="category-safety"><div class="category-header"><button class="back-to-categories">← カテゴリー選択に戻る</button><h2>🚨 安全・緊急</h2></div><div class="cards-grid"><div class="card accordion-card" data-card="safety-info"><div class="card-header"><div class="card-header-left"><div class="card-icon">⚠️</div><div><h3>治安・安全</h3><p class="card-summary" id="summary-safety-info"><span class="skeleton-text short skeleton" style="display: inline-block; width: 150px; height: 14px;"></span></p></div></div><div class="accordion-icon">▶︎</div></div><div class="card-detail" id="detail-safety-info"><div class="basic-info" id="basic-safety-info"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div><div class="detailed-info hidden" id="detailed-safety-info"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div></div></div><div class="card accordion-card" data-card="medical"><div class="card-header"><div class="card-header-left"><div class="card-icon">🏥</div><div><h3>医療・保険</h3><p class="card-summary" id="summary-medical"><span class="skeleton-text short skeleton" style="display: inline-block; width: 150px; height: 14px;"></span></p></div></div><div class="accordion-icon">▶︎</div></div><div class="card-detail" id="detail-medical"><div class="basic-info" id="basic-medical"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div><div class="detailed-info hidden" id="detailed-medical"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div></div></div></div><div class="emergency-section"><h3 class="emergency-title">緊急連絡先</h3><div class="emergency-buttons"><a href="#" id="btn-police" class="emergency-btn emergency-btn-police"><span class="emergency-icon">🚓</span><span class="emergency-text">警察</span></a><a href="#" id="btn-ambulance" class="emergency-btn emergency-btn-ambulance"><span class="emergency-icon">🚑</span><span class="emergency-text">救急</span></a><a href="#" id="btn-embassy" class="emergency-btn emergency-btn-embassy"><span class="emergency-icon">🏛️</span><span class="emergency-text">大使館</span></a></div></div></div>
            <div class="category-content hidden" id="category-tourism"><div class="category-header"><button class="back-to-categories">← カテゴリー選択に戻る</button><h2>🗺️ 観光・文化</h2></div><div class="cards-grid"><div class="card accordion-card" data-card="attractions"><div class="card-header"><div class="card-header-left"><div class="card-icon">📍</div><div><h3>観光・名所</h3><p class="card-summary" id="summary-attractions"><span class="skeleton-text short skeleton" style="display: inline-block; width: 150px; height: 14px;"></span></p></div></div><div class="accordion-icon">▶︎</div></div><div class="card-detail" id="detail-attractions"><div class="basic-info" id="basic-attractions"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div><div class="detailed-info hidden" id="detailed-attractions"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div></div></div><div class="card accordion-card" data-card="items"><div class="card-header"><div class="card-header-left"><div class="card-icon">🎒</div><div><h3>持ち物・電源</h3><p class="card-summary" id="summary-items"><span class="skeleton-text short skeleton" style="display: inline-block; width: 150px; height: 14px;"></span></p></div></div><div class="accordion-icon">▶︎</div></div><div class="card-detail" id="detail-items"><div class="basic-info" id="basic-items"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div><div class="detailed-info hidden" id="detailed-items"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div></div></div><div class="card accordion-card" data-card="holidays"><div class="card-header"><div class="card-header-left"><div class="card-icon">📅</div><div><h3>祝日・営業時間</h3><p class="card-summary" id="summary-holidays"><span class="skeleton-text short skeleton" style="display: inline-block; width: 150px; height: 14px;"></span></p></div></div><div class="accordion-icon">▶︎</div></div><div class="card-detail" id="detail-holidays"><div class="basic-info" id="basic-holidays"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div><div class="detailed-info hidden" id="detailed-holidays"><div class="skeleton-content"><div class="skeleton-text long skeleton"></div><div class="skeleton-text medium skeleton"></div><div class="skeleton-text short skeleton"></div></div></div></div></div></div></div>
        </main>
        <footer class="footer"><p>※情報は参考です。最終確認は公式サイトで行ってください。</p></footer>
    </div>
    <script src="thailand-data.js"></script>
    <script src="korea-data.js"></script>
    <script src="app-link-helper.js"></script>
    <script src="app.js"></script>
    
    <!-- PWA Service Worker 登録 -->
    <script>
        // Service Worker登録
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/TripReady/service-worker.js')
                    .then((registration) => {
                        console.log('✅ Service Worker登録成功:', registration.scope);
                        
                        // 更新チェック
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    console.log('🔄 新しいバージョンが利用可能です');
                                    // 自動更新（オプション：ユーザーに通知することも可能）
                                    newWorker.postMessage({ type: 'SKIP_WAITING' });
                                }
                            });
                        });
                    })
                    .catch((error) => {
                        console.log('❌ Service Worker登録失敗:', error);
                    });
            });
            
            // Service Workerの更新を検知してリロード
            let refreshing = false;
            navigator.serviceWorker.addEventListener('controllerchange', () => {
                if (!refreshing) {
                    refreshing = true;
                    window.location.reload();
                }
            });
        }
        
        // インストールプロンプト
        let deferredPrompt;
        let installButton;
        
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('📱 インストールプロンプト表示可能');
            e.preventDefault();
            deferredPrompt = e;
            
            // インストールボタンを表示（オプション）
            showInstallButton();
        });
        
        function showInstallButton() {
            // フッターにインストールボタンを追加
            const footer = document.querySelector('.footer');
            if (footer && !document.getElementById('install-btn')) {
                installButton = document.createElement('button');
                installButton.id = 'install-btn';
                installButton.textContent = '📱 ホーム画面に追加';
                installButton.style.cssText = `
                    margin-top: 16px;
                    padding: 12px 24px;
                    background: rgba(255, 255, 255, 0.2);
                    color: white;
                    border: 2px solid rgba(255, 255, 255, 0.3);
                    border-radius: 8px;
                    font-size: 16px;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.3s ease;
                `;
                
                installButton.addEventListener('click', async () => {
                    if (deferredPrompt) {
                        deferredPrompt.prompt();
                        const { outcome } = await deferredPrompt.userChoice;
                        console.log(`インストール結果: ${outcome}`);
                        deferredPrompt = null;
                        installButton.style.display = 'none';
                    }
                });
                
                footer.appendChild(installButton);
            }
        }
        
        // インストール完了時
        window.addEventListener('appinstalled', () => {
            console.log('✅ アプリがインストールされました');
            if (installButton) {
                installButton.style.display = 'none';
            }
            deferredPrompt = null;
        });
    </script>
</body>
</html>
